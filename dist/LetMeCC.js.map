{"version":3,"sources":["webpack:///./src/tracker/trackerData.ts","webpack:///./src/tracker/index.ts","webpack:///./src/utils/uuid.ts","webpack:///./src/globel/data.ts","webpack:///./src/LetMeCC.ts"],"names":["extendStatics","__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","this","TrackerData","_trackerData","set","params","__extends","d","b","setPrototypeOf","__proto__","Array","TypeError","String","__","constructor","create","Tracker","_super","name","cipher","options","globelData","_this","Error","_name","_cipher","_options","_globelData","track","eventName","pageData","queryParams","type","pageParams","trackerParams","eventParams","console","log","UUID","pre","random","arr","Uint32Array","window","crypto","getRandomValues","Math","floor","toString","init","document","location","href","title","referrer","Date","uuid","get","$version","$url","$title","$referrer","$pageInitTime","$pageId","LetMeCC","_tracks","setTrackData","reset","LetMeCCInstance","functionName","_a","args","_i","e"],"mappings":"mBAAA,ICCQA,EDDJC,EAAsC,WAStC,OARAA,EAAWC,OAAOC,QAAU,SAASC,GACjC,IAAK,IAAIC,EAAGC,EAAI,EAAGC,EAAIC,UAAUC,OAAQH,EAAIC,EAAGD,IAE5C,IAAK,IAAII,KADTL,EAAIG,UAAUF,GACOJ,OAAOS,UAAUC,eAAeC,KAAKR,EAAGK,KACzDN,EAAEM,GAAKL,EAAEK,IAEjB,OAAON,IAEKU,MAAMC,KAAMP,YAE5BQ,EAA6B,WAC7B,SAASA,IACLD,KAAKE,aAAe,GAMxB,OAHAD,EAAYL,UAAUO,IAAM,SAAUC,GAClCJ,KAAKE,aAAehB,EAASA,EAAS,GAAIc,KAAKE,cAAeE,IAE3DH,EARqB,GCX5BI,GACIpB,EAAgB,SAAUqB,EAAGC,GAI7B,OAHAtB,EAAgBE,OAAOqB,gBAClB,CAAEC,UAAW,cAAgBC,OAAS,SAAUJ,EAAGC,GAAKD,EAAEG,UAAYF,IACvE,SAAUD,EAAGC,GAAK,IAAK,IAAIZ,KAAKY,EAAOpB,OAAOS,UAAUC,eAAeC,KAAKS,EAAGZ,KAAIW,EAAEX,GAAKY,EAAEZ,MAC3EW,EAAGC,IAErB,SAAUD,EAAGC,GAChB,GAAiB,mBAANA,GAA0B,OAANA,EAC3B,MAAM,IAAII,UAAU,uBAAyBC,OAAOL,GAAK,iCAE7D,SAASM,IAAOb,KAAKc,YAAcR,EADnCrB,EAAcqB,EAAGC,GAEjBD,EAAEV,UAAkB,OAANW,EAAapB,OAAO4B,OAAOR,IAAMM,EAAGjB,UAAYW,EAAEX,UAAW,IAAIiB,KAInFG,EAAyB,SAAUC,GAEnC,SAASD,EAAQE,EAAMC,EAAQC,EAASC,GACpC,IAAIC,EAAQL,EAAOnB,KAAKE,OAASA,KACjC,IAAKkB,IAASC,EACV,MAAM,IAAII,MAAM,sBAAwBL,EAAO,GAAK,4BAA8B,sBAAwBC,EAAS,GAAK,8BAAgC,kBAM5J,OAJAG,EAAME,MAAQN,EACdI,EAAMG,QAAUN,EAChBG,EAAMI,SAAWN,EACjBE,EAAMK,YAAcN,EACbC,EAcX,OAxBAjB,EAAUW,EAASC,GAanBD,EAAQpB,UAAUgC,MAAQ,SAAUC,EAAWzB,GAC3C,IAAI0B,EAAW9B,KAAK2B,YAAiB,MACjCI,EAAc,CACdC,KAAM,QACNb,OAAQnB,KAAKyB,QACbQ,WAAYH,EACZI,cAAelC,KAAKE,aACpBiC,YAAa/B,GAEjBgC,QAAQC,IAAIR,EAAWE,IAEpBf,EAzBiB,CA0B1Bf,GCvBF,YAnB0B,WACtB,SAASqC,KAeT,OAZAA,EAAK1C,UAAUmB,OAAS,SAAUwB,GAC9B,IAAIC,EACJ,IACI,IAAIC,EAAM,IAAIC,YAAY,GAC1BC,OAAOC,OAAOC,gBAAgBJ,GAC9BD,EAAkB,WAATC,EAAI,GAEjB,MAAOlC,GACHiC,EAASM,KAAKC,MAAsB,WAAhBD,KAAKN,UAE7B,OAAOD,EAAM,IAAMC,EAAOQ,SAAS,KAEhCV,EAhBc,ICCzB,IAAIjB,EAA4B,WAC5B,SAASA,IACLrB,KAAKiD,OAqBT,OAlBA5B,EAAWzB,UAAUqD,KAAO,WACxBjD,KAAW,KAAIkD,SAASC,SAASC,KACjCpD,KAAa,OAAIkD,SAASG,MAC1BrD,KAAgB,UAAIkD,SAASI,SAC7BtD,KAAoB,cAAI,IAAIuD,KAC5BvD,KAAc,QAAIwD,EAAKzC,OAAO,QAGlCM,EAAWzB,UAAU6D,IAAM,WACvB,MAAO,CACHC,SAAU1D,KAAe,SACzB2D,KAAM3D,KAAW,KACjB4D,OAAQ5D,KAAa,OACrB6D,UAAW7D,KAAgB,UAC3B8D,cAAe9D,KAAoB,cACnC+D,QAAS/D,KAAc,UAGxBqB,EAvBoB,GCC3B2C,EAAyB,WACzB,SAASA,IACLhE,KAAKiE,QAAU,GACfjE,KAAK2B,YAAc,IAAIN,EAuB3B,OApBA2C,EAAQpE,UAAUqD,KAAO,SAAU/B,EAAMC,EAAQC,GAC7CpB,KAAKiE,QAAQ/C,GAAQ,IAAIF,EAAQE,EAAMC,EAAQC,EAASpB,KAAK2B,cAGjEqC,EAAQpE,UAAUgC,MAAQ,SAAUV,EAAMW,EAAWzB,GACjD,IAAIJ,KAAKiE,QAAQ/C,GAIb,MAAM,IAAIK,MAAM,WAAaL,EAAO,mBAHpClB,KAAKiE,QAAQ/C,GAAMU,MAAMC,EAAWzB,IAO5C4D,EAAQpE,UAAUsE,aAAe,SAAUhD,EAAMd,GAC7CJ,KAAKiE,QAAQ/C,GAAMf,IAAIC,IAG3B4D,EAAQpE,UAAUuE,MAAQ,WACtBnE,KAAK2B,aAAe3B,KAAK2B,YAAkB,QAExCqC,EA1BiB,GA4B5BrB,OAAOyB,gBAAkB,IAAIJ,EAC7BrB,OAAOqB,QAAU,SAAUK,GAGvB,IAFA,IAAIC,EACAC,EAAO,GACFC,EAAK,EAAGA,EAAK/E,UAAUC,OAAQ8E,IACpCD,EAAKC,EAAK,GAAK/E,UAAU+E,GAE7B,KACKF,EAAK3B,OAAOyB,iBAAiBC,GAActE,MAAMuE,EAAIC,GAE1D,MAAOE,GACHrC,QAAQC,IAAIoC,M","file":"LetMeCC.js","sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar TrackerData = /** @class */ (function () {\n    function TrackerData() {\n        this._trackerData = {};\n    }\n    ;\n    TrackerData.prototype.set = function (params) {\n        this._trackerData = __assign(__assign({}, this._trackerData), params);\n    };\n    return TrackerData;\n}());\nexport { TrackerData };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { TrackerData } from './trackerData';\nvar Tracker = /** @class */ (function (_super) {\n    __extends(Tracker, _super);\n    function Tracker(name, cipher, options, globelData) {\n        var _this = _super.call(this) || this;\n        if (!name || !cipher) {\n            throw new Error(\"\\n                \" + (name ? '' : 'tracker name is required') + \"\\n                \" + (cipher ? '' : 'tracker cipher is required') + \"\\n            \");\n        }\n        _this._name = name;\n        _this._cipher = cipher;\n        _this._options = options;\n        _this._globelData = globelData;\n        return _this;\n    }\n    ;\n    Tracker.prototype.track = function (eventName, params) {\n        var pageData = this._globelData['get']();\n        var queryParams = {\n            type: 'track',\n            cipher: this._cipher,\n            pageParams: pageData,\n            trackerParams: this._trackerData,\n            eventParams: params\n        };\n        console.log(eventName, queryParams);\n    };\n    return Tracker;\n}(TrackerData));\nexport { Tracker };\n","var UUID = /** @class */ (function () {\n    function UUID() {\n    }\n    ;\n    UUID.prototype.create = function (pre) {\n        var random;\n        try {\n            var arr = new Uint32Array(1);\n            window.crypto.getRandomValues(arr);\n            random = arr[0] & 2079910271;\n        }\n        catch (b) {\n            random = Math.floor(Math.random() * 2079910271);\n        }\n        return pre + 'Â·' + random.toString(36);\n    };\n    return UUID;\n}());\n;\nexport default new UUID();\n","import uuid from '../utils/uuid';\nvar globelData = /** @class */ (function () {\n    function globelData() {\n        this.init();\n    }\n    ;\n    globelData.prototype.init = function () {\n        this['$url'] = document.location.href;\n        this['$title'] = document.title;\n        this['$referrer'] = document.referrer;\n        this['$pageInitTime'] = new Date();\n        this['$pageId'] = uuid.create('pid');\n    };\n    ;\n    globelData.prototype.get = function () {\n        return {\n            $version: this['$version'],\n            $url: this['$url'],\n            $title: this['$title'],\n            $referrer: this['$referrer'],\n            $pageInitTime: this['$pageInitTime'],\n            $pageId: this['$pageId']\n        };\n    };\n    return globelData;\n}());\nexport { globelData };\n","import { Tracker } from './tracker/index';\nimport { globelData } from './globel/data';\nvar LetMeCC = /** @class */ (function () {\n    function LetMeCC() {\n        this._tracks = {};\n        this._globelData = new globelData();\n    }\n    ;\n    LetMeCC.prototype.init = function (name, cipher, options) {\n        this._tracks[name] = new Tracker(name, cipher, options, this._globelData);\n    };\n    ;\n    LetMeCC.prototype.track = function (name, eventName, params) {\n        if (this._tracks[name]) {\n            this._tracks[name].track(eventName, params);\n        }\n        else {\n            throw new Error(\"Tracker \" + name + \" does not exist\");\n        }\n    };\n    ;\n    LetMeCC.prototype.setTrackData = function (name, params) {\n        this._tracks[name].set(params);\n    };\n    ;\n    LetMeCC.prototype.reset = function () {\n        this._globelData && this._globelData['init']();\n    };\n    return LetMeCC;\n}());\nwindow.LetMeCCInstance = new LetMeCC();\nwindow.LetMeCC = function (functionName) {\n    var _a;\n    var args = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        args[_i - 1] = arguments[_i];\n    }\n    try {\n        (_a = window.LetMeCCInstance)[functionName].apply(_a, args);\n    }\n    catch (e) {\n        console.log(e);\n    }\n};\n"],"sourceRoot":""}